<h1>Request a new Jira account</h1>

<form onsubmit="jira_account_request_submit(this); return false;">
    <div class="mb-3">
        <label for="email" class="form-label">Email address</label>
        <input type="email" class="form-control" id="email"  name="email"aria-describedby="emailHelp">
        <div id="emailHelp" class="form-text">We'll never share your email with anyone else. Please ensure this email address is correct, as it will be used to verify your request.</div>
    </div>
    <div class="mb-3">
        <label for="username" class="form-label">Desired Username</label>
        <input type="text" class="form-control" id="username"  name="username"aria-describedby="usernameHelp">
        <div id="usernameHelp" class="form-text">Your username must be between 4 and 20 characters long.</div>
    </div>
    <div class="mb-3">
        <label for="realname" class="form-label">Your real (public) name</label>
        <input type="text" class="form-control" id="realname"  name="realname"aria-describedby="realnameHelp">
        <div id="realnameHelp" class="form-text">This is your actual name, as it will appear on Jira tickets.</div>
    </div>
    <div class="mb-3">
        <label for="project" class="form-label">Which Apache project are you initially going to be filing a ticket for?</label>
        <select class="form-control" id="project"  name="project"aria-describedby="projectHelp">
            <option selected disabled value="">--- Select a project ---</option>
        </select>
        <div id="projectHelp" class="form-text">Select the project you will initially be contributing to with this account. Make sure you have selected the correct project, and that they are using Jira for issue management, as the project will be reviewing your account request.</div>
    </div>
    <div class="mb-3">
        <label for="why" class="form-label">Please tell us a little about what you intend to use this account for</label>
        <input type="text" class="form-control" id="why"  name="why"aria-describedby="whyHelp">
        <div id="whyHelp" class="form-text">Adding a proper description of your intended use for this account will assist the project in reviewing this request.</div>
    </div>

    <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" name="verify" id="verify" value="agree">
        <label class="form-check-label" for="verify">I agree to let the project I am requesting an account for review my public data.</label>
        <div id="verifyHelp" class="form-text">Your email address will not be shared with the project, but your username, public name, and reason for requesting an account will.</div>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>


<script>
    document.body.onload = () => {
        // Check for token verification
        const token = location.search.substring(1);
        if (token && token.length == 36) {
            jira_verify_email(token);
        }
        // No token, cue the form
        else {
            jira_seed_project_list();
        }
    }
</script>